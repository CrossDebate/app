<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise HoT - CrossDebate</title>

    <!-- Resource hints -->
    <link rel="preload" href="css/style.css" as="style">
    <link rel="preload" href="css/interactivity.css" as="style"> <!-- Assuming interactivity styles are separate -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style">
    <link rel="preload" href="https://d3js.org/d3.v7.min.js" as="script"> <!-- Preload D3 if used -->
    <!-- Add preload for other large JS libraries if needed -->

    <!-- External CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/interactivity.css"> <!-- Specific styles for interactivity if any -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Specific Styles for Analysis Page -->
    <style>
        .analysis-container {
            display: flex;
            flex-direction: column; /* Default layout */
            gap: 20px;
        }

        .hot-visualization-area {
            background-color: var(--input-bg); /* Slightly different background */
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            min-height: 500px; /* Ensure space for the graph */
            padding: 15px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
            position: relative; /* For potential absolute positioning inside */
            overflow: hidden; /* Ensure SVG/Canvas stays within bounds */
        }

        #hypergraph-visualization { /* The actual container for the graph */
             width: 100%;
             height: 100%;
             min-height: 470px; /* Adjust based on padding */
        }

        .hot-controls {
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: var(--border-radius-md);
            border: 1px solid var(--border-color);
        }

        .hot-controls h4 {
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .control-group input[type="range"] {
            width: 100%;
        }

        .control-group input[type="number"],
        .control-group select {
            width: 100%;
            padding: 8px;
        }

        .hot-analysis-results {
             background-color: var(--card-bg);
             padding: 15px;
             border-radius: var(--border-radius-md);
             border: 1px solid var(--border-color);
             max-height: 400px;
             overflow-y: auto;
        }

        /* Layout adjustments for wider screens */
        @media (min-width: 992px) {
            .analysis-container {
                flex-direction: row; /* Side-by-side layout */
            }
            .hot-main-area {
                flex: 3; /* Visualization takes more space */
                display: flex;
                flex-direction: column;
            }
            .hot-sidebar-area {
                flex: 1; /* Controls and results take less space */
                display: flex;
                flex-direction: column;
                gap: 20px;
            }
            .hot-visualization-area {
                flex-grow: 1; /* Allow visualization to fill space */
            }
        }

        /* Styling for graph elements (placeholders, adjust based on library) */
        .node {
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .node:hover {
            transform: scale(1.1);
        }
        .hyperedge {
            cursor: pointer;
            transition: opacity 0.2s ease;
        }
        .hyperedge:hover {
            opacity: 0.8;
        }
        .selected {
             stroke: var(--accent-color);
             stroke-width: 3px;
        }

    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar (Identical structure to index.html) -->
        <div class="sidebar">
            <div class="nav-header">
                <h2>CrossDebate</h2>
            </div>
            <ul>
                 <li>
                    <a href="index.html">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="analise.html" class="active"> <!-- Mark as active -->
                        <i class="fas fa-microscope"></i>
                        <span>Análise HoT</span>
                    </a>
                </li>
                 <li>
                    <a href="visualizacao.html">
                        <i class="fas fa-chart-bar"></i>
                        <span>Visualizações</span>
                    </a>
                </li>
                <li>
                    <a href="performance.html">
                        <i class="fas fa-chart-line"></i>
                        <span>Performance</span>
                    </a>
                </li>
                <li>
                    <a href="configuracoes.html">
                        <i class="fas fa-cog"></i>
                        <span>Configurações</span>
                    </a>
                </li>
            </ul>
             <!-- Sidebar Toggle Button (Optional, if needed) -->
             <!-- <button class="sidebar-toggle"><i class="fas fa-chevron-left"></i></button> -->
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <div class="theme-toggle" id="themeToggle" title="Alternar Tema">
                <i class="fas fa-moon"></i>
            </div>

            <h1>Análise do Hipergrafo de Pensamentos (HoT)</h1>
            <p>Visualize a estrutura dinâmica das interações e argumentos. Clique em nós ou hiperarestas e use os controles para ajustar o grafo e influenciar as próximas respostas do modelo no chat.</p>

            <div class="analysis-container">

                <!-- Main Area for Visualization -->
                <div class="hot-main-area">
                    <div class="hot-visualization-area card">
                        <h4>Visualização do Hipergrafo</h4>
                        <div id="hypergraph-visualization">
                            <div class="loading-spinner"></div>
                            <!-- O Hipergrafo será renderizado aqui por hypergraph_interaction.js -->
                        </div>
                    </div>
                </div>

                <!-- Sidebar Area for Controls and Results -->
                <div class="hot-sidebar-area">
                    <div class="hot-controls card">
                        <h4><i class="fas fa-sliders-h"></i> Controles do Hipergrafo</h4>
                        <div class="control-group">
                            <label for="selectedElementInfo">Elemento Selecionado:</label>
                            <span id="selectedElementInfo">Nenhum</span>
                        </div>
                        <div class="control-group">
                            <label for="edgeWeightSlider">Ajustar Peso da Hiperaresta:</label>
                            <input type="range" id="edgeWeightSlider" min="0" max="1" step="0.05" value="0.5" disabled>
                            <span id="edgeWeightValue">0.5</span>
                        </div>
                        <div class="control-group">
                            <label for="nodeRelevanceSlider">Ajustar Relevância do Nó:</label>
                            <input type="range" id="nodeRelevanceSlider" min="0" max="1" step="0.05" value="0.5" disabled>
                             <span id="nodeRelevanceValue">0.5</span>
                        </div>
                         <div class="control-group">
                            <label for="layoutForceSlider">Força do Layout:</label>
                            <input type="range" id="layoutForceSlider" min="-1" max="1" step="0.1" value="0.1">
                             <span id="layoutForceValue">0.1</span>
                        </div>
                        <button id="applyHoTChanges" class="button primary" disabled>Aplicar Ajustes</button>
                        <button id="resetHoTView" class="button secondary">Resetar Visualização</button>
                    </div>

                    <div class="hot-analysis-results card">
                        <h4><i class="fas fa-chart-line"></i> Métricas e Insights</h4>
                        <div id="hot-metrics">
                            <p>Carregando métricas...</p>
                            <!-- Métricas como densidade, centralidade, etc., serão inseridas aqui -->
                        </div>
                        <hr style="border-color: var(--border-color); margin: 15px 0;">
                        <div id="hot-insights">
                            <p>Carregando insights...</p>
                            <!-- Insights gerados pela análise do HoT -->
                        </div>
                    </div>
                </div>

            </div> <!-- Fim .analysis-container -->

        </div> <!-- Fim .main-content -->
    </div> <!-- Fim .app-container -->

    <!-- Elemento para Notificações -->
    <div class="notification" id="notification">
        <i id="notificationIcon" class="fas fa-check-circle"></i>
        <span id="notificationText"></span>
    </div>

    <!-- Scripts -->
    <!-- Bibliotecas de Visualização (Ex: D3.js, Plotly, ou específica de Hipergrafo) -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Se usar d3-hypergraph: <script src="https://unpkg.com/d3-hypergraph@1.0.0/dist/d3-hypergraph.min.js"></script> -->
    <!-- Se usar Plotly para alguma parte: <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> -->

    <!-- Scripts da Aplicação -->
    <script src="js/interactivity.js" defer></script>
    <script src="js/hypergraph_interaction.js" defer></script> <!-- Lógica específica desta página -->

</body>
</html>
